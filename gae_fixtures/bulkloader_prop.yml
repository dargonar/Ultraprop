# Autogenerated bulkloader.yaml file.
# You must edit this file before using it. TODO: Remove this line when done.
# At a minimum address the items marked with TODO:
#  * Fill in connector and connector_options
#  * Review the property_map.
#    - Ensure the 'external_name' matches the name of your CSV column,
#      XML tag, etc.
#    - Check that __key__ property is what you want. Its value will become
#      the key name on import, and on export the value will be the Key
#      object.  If you would like automatic key generation on import and
#      omitting the key on export, you can remove the entire __key__
#      property from the property map.

# If you have module(s) with your model classes, add them here. Also
# change the kind properties to model_class.
python_preamble:
- import: base64
- import: re
- import: google.appengine.ext.bulkload.transform
- import: google.appengine.ext.bulkload.bulkloader_wizard
- import: google.appengine.ext.db
- import: google.appengine.api.datastore
- import: google.appengine.api.users
- import: helpers

transformers:

- kind: Property
  connector: csv # TODO: Choose a connector here: csv, simplexml, etc...
  #connector_options:
    # TODO: Add connector options here--these are specific to each connector.
  property_map:
    - property: __key__
      external_name: key
      export_transform: transform.key_id_or_name_as_string

    - property: headline
      external_name: headline

    - property: main_description
      external_name: main_description
      import_transform: db.Text
      
    - property: country
      external_name: country

    - property: state
      external_name: state

    - property: city
      external_name: city

    - property: neighborhood
      external_name: neighborhood

    - property: street_name
      external_name: street_name

    - property: street_number
      external_name: street_number
      import_transform: transform.none_if_empty(int)      

    - property: zip_code
      external_name: zip_code
    
    - property: floor
      external_name: floor

    - property: building_floors
      external_name: building_floors
      import_transform: transform.none_if_empty(int)
      
    - property: images_count
      external_name: images_count
      import_transform: transform.none_if_empty(int)
      
    - property: user
      external_name: user

    - property: area_indoor
      external_name: area_indoor
      import_transform: transform.none_if_empty(int)      

    - property: area_outdoor
      external_name: area_outdoor
      import_transform: transform.none_if_empty(int)
      
    - property: rooms
      external_name: rooms
      import_transform: transform.none_if_empty(int)      

    - property: bathrooms
      external_name: bathrooms
      import_transform: transform.none_if_empty(int)
      
    - property: bedrooms
      external_name: bedrooms
      import_transform: transform.none_if_empty(int)      
      
    - property: appurtenance
      external_name: appurtenance
      import_transform: transform.none_if_empty(int)

    - property: balcony
      external_name: balcony
      import_transform: transform.none_if_empty(int)      

    - property: doorman
      external_name: doorman
      import_transform: transform.none_if_empty(int)      

    - property: elevator
      external_name: elevator
      import_transform: transform.none_if_empty(int)      

    - property: fireplace
      external_name: fireplace
      import_transform: transform.none_if_empty(int)      

    - property: furnished
      external_name: furnished
      import_transform: transform.none_if_empty(int)      

    - property: garage
      external_name: garage
      import_transform: transform.none_if_empty(int)      

    - property: garden
      external_name: garden
      import_transform: transform.none_if_empty(int)      

    - property: grillroom
      external_name: grillroom
      import_transform: transform.none_if_empty(int)      

    - property: gym
      external_name: gym
      import_transform: transform.none_if_empty(int)      

    - property: live_work
      external_name: live_work
      import_transform: transform.none_if_empty(int)      

    - property: luxury
      external_name: luxury
      import_transform: transform.none_if_empty(int)      

    - property: pool
      external_name: pool
      import_transform: transform.none_if_empty(int)      

    - property: terrace
      external_name: terrace
      import_transform: transform.none_if_empty(int)      

    - property: washer_dryer
      external_name: washer_dryer
      import_transform: transform.none_if_empty(int)      

    - property: sum
      external_name: sum
      import_transform: transform.none_if_empty(int)      
    
    - property: agua_corriente
      external_name: agua_corriente
      import_transform: transform.none_if_empty(int)      

    - property: gas_natural
      external_name: gas_natural
      import_transform: transform.none_if_empty(int)      

    - property: gas_envasado
      external_name: gas_envasado
      import_transform: transform.none_if_empty(int)      

    - property: luz
      external_name: luz
      import_transform: transform.none_if_empty(int)      

    - property: cloacas
      external_name: cloacas
      import_transform: transform.none_if_empty(int)      

    - property: telefono
      external_name: telefono
      import_transform: transform.none_if_empty(int)      

    - property: tv_cable
      external_name: tv_cable
      import_transform: transform.none_if_empty(int)      

    - property: internet
      external_name: internet
      import_transform: transform.none_if_empty(int)      

    - property: vigilancia
      external_name: vigilancia
      import_transform: transform.none_if_empty(int)      

    - property: patio
      external_name: patio
      import_transform: transform.none_if_empty(int)      
      
      
    - property: monitoreo
      external_name: monitoreo
      import_transform: transform.none_if_empty(int)      

    - property: year_built
      external_name: year_built
      import_transform: transform.none_if_empty(int)    
      
    - property: realestate
      external_name: realestate
      export_transform: transform.key_id_or_name_as_string
      import_transform: helpers.create_foreign_key('RealEstate')

    - property: prop_type_id
      external_name: prop_type_id

    - property: prop_state_id
      external_name: prop_state_id
      import_transform: transform.none_if_empty(int)

    - property: prop_operation_state_id
      external_name: prop_operation_state_id
      import_transform: transform.none_if_empty(int)
      
    - property: prop_owner_id
      external_name: prop_owner_id
      import_transform: transform.none_if_empty(int)

    - property: prop_operation_id
      external_name: prop_operation_id
      import_transform: transform.none_if_empty(int)

    - property: price_sell
      external_name: price_sell
      import_transform: transform.none_if_empty(float)

    - property: price_sell_currency
      external_name: price_sell_currency
  
    - property: price_rent
      external_name: price_rent
      import_transform: transform.none_if_empty(float)

    - property: price_rent_currency
      external_name: price_rent_currency

    - property: price_sell_computed
      external_name: price_sell_computed
      import_transform: transform.none_if_empty(float)

    - property: price_rent_computed
      external_name: price_rent_computed
      import_transform: transform.none_if_empty(float)
      
    - property: location
      external_name: location
      import_transform: helpers.get_geo('hehe') #transform.none_if_empty(float)      

    - property: location_geocells
      external_name: location_geocells
      import_transform: "lambda x: x is not None and len(x) > 0 and eval(x) or ['']"
    
    - property: status
      external_name: status
      import_transform: transform.none_if_empty(int)      