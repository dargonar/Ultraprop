{% extends "frontend/_base.html"%}

{%block head%}
<link href="/css/fb-buttons.css" rel="stylesheet" type="text/css" />

<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=true"></script> 
<script type="text/javascript" src="/js/_infobox_packed.js"></script>
<script type="text/javascript">
  var config_array          = {{ config_arrayJSON }};
  var max_results           = {{ max_results }};
  var preset                = {{ presetJSON if preset else 'null' }};
  var default_lat           = {{ preset['center_lat'] if preset and preset['center_lat'] and preset['center_lat'] != '0' else 'null' }};
  var default_lon           = {{ preset['center_lon'] if preset and preset['center_lon'] and preset['center_lon'] != '0' else 'null' }};
  var default_zoom_level    = {{ preset['zoom_level'] if preset and preset['zoom_level'] else '13' }};
  
  {% set price_ranges = config_array['multiple_values_properties']['prop_operation_id']['ranges'][preset['prop_operation_id']] %}
  var default_slider_step   = {{ price_ranges['step'] }};
  var default_slider_min    = {{ price_ranges['min'] }};
  var default_slider_max    = {{ price_ranges['max'] }};
  var default_min_value     = {{ preset['price_min'] if preset and preset['price_min'] else price_ranges['min'] }};
  var default_max_value     = {{ preset['price_max'] if preset and preset['price_max'] else price_ranges['max'] }};
  
  {% set operation1_config = config_array['multiple_values_properties']['prop_operation_id']['ranges']['1'] %}
  var default_slider_step1  = {{ operation1_config['step'] }};
  var default_slider_min1   = {{ operation1_config['min'] }};
  var default_slider_max1   = {{ operation1_config['max'] }};
  {% set operation2_config = config_array['multiple_values_properties']['prop_operation_id']['ranges']['2'] %}
  var default_slider_step2  = {{ operation2_config['step'] }};
  var default_slider_min2   = {{ operation2_config['min'] }};
  var default_slider_max2   = {{ operation2_config['max'] }};
  
  var show_extended_filter  = {{ preset['show_extended_filter'] if preset and preset['show_extended_filter'] else '0' }};
  
  var realestate_key        = {{ "'"+preset['map.filter.realestate']+"'" if preset and preset['map.filter.realestate'] else 'null'}};
  
  var OPER_SELL             = {{ _OPER_SELL }};
  var OPER_RENT             = {{ _OPER_RENT }};
</script>
<script src="/js/ZeroClipboard.js" type="text/javascript"></script>
<script src="/js/jquery.tools.min.js" type="text/javascript"></script>
<script src="/js/index.js" type="text/javascript"></script>

<script type="text/javascript" src="/js/jquery.ketchup.js"></script>
<style type="text/css"> 
    html { width:100%; heigh:100%; overflow:hidden;}
</style>
<link href="/css/mapa_tabs.css" rel="stylesheet" type="text/css" /> 
{%endblock%}  