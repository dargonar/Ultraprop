<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>ULTRAPROP</title>

    <link href="/css/frontend.css" rel="stylesheet" type="text/css" />
    <link href="/css/common.css" rel="stylesheet" type="text/css" />
    <link href="/css/jquery-ui-1.8.7.custom.css" rel="stylesheet" type="text/css" />
    <link href="/css/jqtransform.css" rel="stylesheet" type="text/css" />
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300,400,600&v2' rel='stylesheet' type='text/css'>
    
    <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script> 
    <script src="/js/jquery-1.4.4.min.js" type="text/javascript"></script>
    <script src="/js/jquery-ui-1.8.7.custom.min.js" type="text/javascript"></script>
    <script src="/js/jquery.jqtransform.js" type="text/javascript"></script>
    <script src="/js/number-functions.js" type="text/javascript"></script>
    <script src="/js/utils.js" type="text/javascript"></script>
    <script src="/js/jquery.addplaceholder.js" type="text/javascript"></script>
    <script type="text/javascript">
      var OPER_SELL             = {{ _OPER_SELL }};
      var OPER_RENT             = {{ _OPER_RENT }};
      var geocoder = new google.maps.Geocoder();
      
      function is_from_country(item, country)
      {
        //Solo direcciones de argentina
        for(var i=0; i<item.address_components.length; i++)
        {
          var acomp = item.address_components[i];
          if( acomp.types[0] == 'country' && acomp.long_name.toUpperCase() == country.toUpperCase())
            return true;
        }
        
        return false;
      }
      
      {% set price_ranges = config_array['multiple_values_properties']['prop_operation_id']['ranges'][preset['prop_operation_id']] %}
      var default_slider_step   = {{ price_ranges['step'] }};
      var default_slider_min    = {{ price_ranges['min'] }};
      var default_slider_max    = {{ price_ranges['max'] }};
      
      {% set price_ranges = config_array['multiple_values_properties']['prop_operation_id']['ranges']['1'] %}
      var default_slider_step1  = {{ price_ranges['step'] }};
      var default_slider_min1   = {{ price_ranges['min'] }};
      var default_slider_max1   = {{ price_ranges['max'] }};
      
      {% set price_ranges = config_array['multiple_values_properties']['prop_operation_id']['ranges']['2'] %}
      var default_slider_step2  = {{ price_ranges['step'] }};
      var default_slider_min2   = {{ price_ranges['min'] }};
      var default_slider_max2   = {{ price_ranges['max'] }};
      
      jQuery(document).ready(function(){
        
        jQuery('[jqtransform|=true]').jqTransform();
        
        jQuery("#price_slider").slider({
          orientation: 'horizontal', min: default_slider_min, max: default_slider_max, range: true, step: default_slider_step, values: [default_slider_min, default_slider_max], 
          slide: function(event, ui) { 
              formatRangePriceText('price_display'
                                    , getPriceValue(ui.values[0])
                                    , getPriceValue(ui.values[1])
                                    , 'ars'
                                    ,jQuery( "#price_slider" ).slider( "option", "max") );
            },
          change: function(event, ui) {
            formatRangePriceText('price_display'
                                  , getPriceValue(ui.values[0])
                                  , getPriceValue(ui.values[1])
                                  , 'ars'
                                  ,jQuery( "#price_slider" ).slider( "option", "max") );
          }
        });
        formatRangePriceText('price_display'
                            , getPriceValue(jQuery("#price_slider").slider( "option", "values" )[0])
                            , getPriceValue(jQuery("#price_slider").slider( "option", "values" )[1])
                            , 'ars'
                            ,jQuery( "#price_slider" ).slider( "option", "max") );
        
        jQuery("#searchmap").autocomplete({
          source: function(request, response) {
            geocoder.geocode( {'address': request.term, 'region' : 'ar'}, function(results, status) {
              response(jQuery.map(results, function(item) {
                  //Solo direcciones de argentina
                  if( !is_from_country(item,'Argentina') )
                    return null;

                  return {
                        label: item.formatted_address,
                        value: item.formatted_address,
                        result: item
                  };
              }));
            })
          },
          select: function(event, ui) {
            jQuery('#center_lat').val(ui.item.result.geometry.location.lat());
            jQuery('#center_lon').val(ui.item.result.geometry.location.lng());
          }
        }); 
        
        $('#prop_operation_id_container input[type="radio"]').change(function(){
          if ($(this).attr('id') == 'prop_operation_id2' && $(this).is(':checked'))
          {
            $('#prop_operation_id').val(OPER_RENT);
            setPriceSliderOptions('price_slider', default_slider_max2, default_slider_step2, default_slider_min2, default_slider_max2);
          }
          else 
          if ($(this).attr('id') == 'prop_operation_id1' && $(this).is(':checked'))
          {
            $('#prop_operation_id').val(OPER_SELL);
            setPriceSliderOptions('price_slider', default_slider_max1, default_slider_step1, default_slider_min1, default_slider_max1);
          }
        });
        
        jQuery('input[placeholder]').addPlaceholder({ 'class': 'hint'}); //{dotextarea:false, class:hint}
        
      });
      
      function checkForm()
      {
        var priceValues = getPriceValues();
        jQuery('#price_min').val(priceValues[0]);
        jQuery('#price_max').val(priceValues[1]);
        return true;
      }
    </script>
    {% include "google_analytics.html" %}
  </head>

  <body class="frontend_home">
    <div id="container" align="center">
        <!-- /// Container 960 /// -->
        <div id="content" align="left">
          <!-- /// HEADER /// -->
          <div id="header">
            <a href="/" title="Página de inicio de UltraProp"><img class="logo" src="/img/pixel-transp.gif" /></a>
            {%include "frontend/templates/header_links.html"%}
          </div>
            <div id="search">
              <div class="home_title">
                <div class="first">
                  Las Inmobiliarias de
                </div>
                <div class="second">
                  La Plata y Gran La Plata
                </div>
                <div class="first">
                  en un mismo lugar.
                </div>
                <div class="third">
                  Miles de Inmuebles te están esperando, 
encontrá el tuyo de la forma más Simple.
                </div>
              </div>
              <div class="box">
                <form action="{{ url_for('frontend/map') }}" method="post" name="home_search_form" id="home_search_form" onSubmit="return checkForm();" >
                  <input name="price_min" id="price_min" type="hidden" value="0" />
                  <input name="price_max" id="price_max" type="hidden" value="0" />
                  <input name="center_lat" id="center_lat" type="hidden" value="0" />
                  <input name="center_lon" id="center_lon" type="hidden" value="0" />
                  <input name="zoom_level" id="zoom_level" type="hidden" value="15" />
                  <div id="searchbox">
                    <input class="search" name="searchmap" id="searchmap" placeholder="ej: calle 44 829, La Plata, Buenos Aires, Argentina" type="text" value="" />                    <input type="submit" id="btnSearchHome" value="Buscar" style="border:none;"/>
                    <ul id="locations">
                      <li>
                        <a href="#" onclick="jQuery('#center_lat').val('-34.921127');jQuery('#center_lon').val('-57.954626');jQuery('#home_search_form').submit();" title="La Plata (centro)">La Plata,</a>
                      </li>
                      <li>
                        <a href="#" onclick="jQuery('#center_lat').val('-34.888536');jQuery('#center_lon').val('-58.02259');jQuery('#home_search_form').submit();" title="Manuel B. Gonnet">Gonnet,</a>
                      </li>
                      <li>
                        <a href="#" onclick="jQuery('#center_lat').val('-34.879453');jQuery('#center_lon').val('-58.061228');jQuery('#home_search_form').submit();" title="City Bell">City Bell,</a>
                      </li>
                      <li>
                        <a href="#" onclick="jQuery('#center_lat').val('-34.51469');jQuery('#center_lon').val('-58.486061');jQuery('#zoom_level').val(13);jQuery('#home_search_form').submit();" 
title="Vicente López, Florida, Olivos, La Lucila, Martínez, Acasusso, San Isidro">Buenos Aires Zona Norte</a>
                      </li>
                      <!--li><a href="#" onclick="jQuery('#center_lat').val('-34.588775');jQuery('#center_lon').val('-58.430786');jQuery('#home_search_form').submit();" title="Barrio de Palermo, Ciudad Autónoma de Buenos Aires, Argentina">Palermo,</a></li>
                      <li><a href="#" onclick="jQuery('#center_lat').val('-34.616539');jQuery('#center_lon').val('-58.450055');jQuery('#home_search_form').submit();" title="Barrio de Caballito, Ciudad Autónoma de Buenos Aires, Argentina">Caballito,</a></li>
                      <li><a href="#" onclick="jQuery('#center_lat').val('-34.920986');jQuery('#center_lon').val('-57.954426');jQuery('#home_search_form').submit();" title="La Plata, Buenos Aires, Argentina">La Plata,</a></li>
                      <li><a href="#" onclick="jQuery('#center_lat').val('-37.979792');jQuery('#center_lon').val('-57.589774');jQuery('#home_search_form').submit();" title="Mar del Plata, Buenos Aires, Argentina">Mar del Plata</a></li-->
                    </ul>
                    <div class="hr"></div>
                  </div>
                  <div id="filterbox">
                    <ul>
                      <li class="type">
                        <h4>ver sólo:</h4>
                        <div jqtransform="true">
                          {% set in_home = config_array['cells']['prop_type_id']['in_home'] %}
                          {% set type_descriptions = config_array['cells']['prop_type_id']['descriptions'] %}
                          {% set short_type_descriptions = config_array['cells']['prop_type_id']['short_descriptions'] %}
                          {% for item in type_descriptions %}
                            {% set index = loop.index0 %} 
                            {% if index>0 and in_home[index]==1 %}
                              <div class="ex-label" title="{{ item }}">
                                <input type="checkbox" checked="checked" name="prop_type_id[{{ index }}]" id="prop_type_id[{{ index }}]" title="{{ item }}" />
                                &nbsp;{{ short_type_descriptions[index] }}
                              </div>
                            {% endif %}
                          {% endfor %}
                          <div>
                            <a class="more" href="{{url_for('frontend/map')}}?filtro_extendido=1">más &raquo;</a>
                          </div>
                        </div>
                      </li>
                      <li class="oper">
                      <h4>para:</h4>
                        <div jqtransform="true" id="prop_operation_id_container">
                          {% set key = 'prop_operation_id' %}
                          {% set descriptions = config_array['multiple_values_properties'][key]['descriptions'] %}
                          {% for item in descriptions %}
                            {% set index = loop.index0 %}
                            {% if index>0 %}
                              <label class="ex-label">
                                <input type="radio" {{'checked="checked"' if index==_OPER_SELL else ''}} id="prop_operation_id{{index}}" name="prop_operation_id" value="{{index}}" />&nbsp;{{item}}
                                <input type="hidden" id="prop_operation_id" value="{{_OPER_SELL}}">
                              </label>
                            {% endif %}
                          {% endfor %}
                          <div>
                            <a style="display:none;" class="more" href="#">más &raquo;</a>
                          </div>
                        </div>
                      </li>
                    </ul>
                    <div class="hr"></div>
                    <div class="price_option_item">
                      <label>Precio</label>
                      <div class="slider" id="price_slider"></div>
                      <span id="price_display">0 <span class="to">hasta</span> 150</span>
                    </div>
                  </div>
                </form>
              </div>
            </div>
            <div id="features">
              <div class="col">
                  <img class="icon" src="/img/icons/map.gif" style="position:relative;margin-left:-5px;" />
                    <div class="data">
                        <!--<h3>Buscá por mapa</h3>-->
                    <h3>Buscá en el mapa</h3>
                        <p>
                            ¿Cerca del subte? ¿Cerca de una plaza? ¿Cerca de la autopista?<br/> 
                            Encontrá la propiedad que estás buscando de la forma más simple.
                      </p>
                    </div>
                </div>
                
              <div class="col">
                  <img class="icon" src="/img/icons/share.png" style="margin-left:-10px;" /> <!-- alert.gif -->
                    <div class="data">
                        <!--<h3>Compartí tu búsqueda</h3>-->
                    <h3>Comparte tu búsqueda</h3>
                        <p>
                          Copiá y compartí tus búsquedas.<br/>
                          No necesitas recordar la ficha de cada propiedad como tampoco su ubicación: <b>lo tienes en el link</b>.<br/>
                          <!-- Compartila con tu pareja así te da el <i>OK</i> con la propiedad que elegiste! -->
                        </p>
                    </div>
                </div>
              <div class="comingsoon">
                <!--div id="highlights">
                  <ul style="list-style:none;display:block;">
                    <li>
                      <em class="highlight">
                        <span>
                          <img src="/img/backgorunds/stars.png" width="50" height="20" alt="" style="top:10px; left:4px; position:absolute;">
                        </span>
                      </em>
                    Mirá en lo que estamos trabajando y si querés, danos feedbak!</li>
                    <li>
                      <em class="highlight">
                        <span>
                          <img src="/img/icons/map_icons_0008_iphone.png" height="30" alt="" style="top:6px; left:11px; position:absolute;">
                        </span>
                      </em>
                    Pronto para iPhone y Android. Dejanos tu mail y te avisamos.</li>
                  </ul>
                </div-->
                <img class="icon" src="/img/zone.gif" style="margin-top:-15px; margin-left:30px;" />
              </div>
    <!-- SEGUNDA LINEA -->
              <h1>¿Cómo utilizar la aplicación?</h1>
              <div class="col">
                <div class="step">1</div>
                <div class="data">
                  <!--<h3>Ubicá el mapa</h3>-->
                  <h3>Localizá el mapa</h3>
                  <p>
                    Ubicá el mapa en la zona en que estás buscando propiedades.<br/>
                      Podés hacerlo <b>arrastrando el mapa</b>, o <b>escribiendo la dirección deseada en la caja de búsqueda</b>.<br/>
                      Por defecto, localizamos tu ubicación y buscamos entorno a ella.
                  </p>
                </div>
              </div> 
                
              <div class="col">
                <div class="step">2</div>
                <div class="data">
                  <!--<h3>Ajustá el filtro</h3>-->
                  <h3>Ajustá tus preferencias</h3>
                  <p>
                    El filtro principal sobre el mapa te permite ajustar los <b>tipos de propiedad</b> más buscados, la <b>operación</b> que querés realizar y el <b>valor</b> que tenés pensado gastar.<br/>
                    Podés ajustar tu búsqueda haciendo click en <b>+ opciones</b>. 
                  </p>
                </div>
              </div> 
              <div class="col">
                <div class="step">3</div>
                <div class="data">
                  <h3>Contactá a la inmobiliaria</h3>
                  <p>
                    Luego de navegar el mapa y elegir las propiedades de tu agrado, comunicate con la Inmobiliaria.<br/>
                    <b>No necesitás registrarte.</b>.<br/>
                  </p>
                    <a href="{{ url_for('frontend/map')}}" title="A buscar mi propiedad!" class="fancy_button find"> 
                        <span>Encontrá tu propiedad!<img src="/img/pixel-transp.gif" /></span> 
                    </a>
                </div>
              </div> 
              <br/>
            </div>
        </div>
    </div>
  </body>
</html>